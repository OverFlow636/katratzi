
<table class="table table-bordered table-stripped">

  <tr>
    <th>Name</th>
    <th>Category</th>
    <th>Percent</th>
    <th>time_left</th>
    <th>Missing</th>
  </tr>

  {{#each entries}}

    <tr>
      <td>{{name}}</td>
      <td>{{category}}</td>
      <td>
        <div id="{{nzbid}}" class="progress">
          <div class="progress-bar" role="progressbar" aria-valuenow="70" aria-valuemin="0" aria-valuemax="100" style="width:{{percentage}}%">
            {{percentage}}%
          </div>
        </div>
      </td>
      <td>{{time_left}}</td>
      <td>{{missing}}</td>
    </tr>

  {{/each}}

</table>

<script>
  setInterval(function() {
    fetch('/downloads?ajax=true').then(function(raw) {
      return raw.json();
    }).then(function(data) {
      data.forEach(function(item) {
        var element = document.querySelector('#' + item.nzbid + ' .progress-bar');
        element.style.width = item.percentage + '%';
        element.innerText = item.percentage + '%';
      });
    }).catch(function(error) {
      console.warn(error);
    })
  }, 2000);
</script>